# Accounting Book - 个人财务管理系统

**USyd COMP9001 期末项目**  
**作者:** Rickey  
**项目周期:** 2025年10月15日 - 2025年10月30日

<div align="right">
  <a href="README.md">English</a>
</div>

## 项目简介

Accounting Book 是一款实用的个人财务管理应用程序，旨在帮助用户系统地记录、分类和分析日常收支，实现更好的财务管理，培养良好的理财习惯。

## 核心功能

### 1. 多账本支持
- **多个账本**: 用户可以为不同目的创建和管理多个账本（如旅游账本、生活开支账本、个人开支账本等）
- **账本管理**: 创建、切换、查看和管理多个账本
- **独立跟踪**: 每个账本维护自己的记录和统计数据

### 2. 支出分类和计算
- **自动分类**: 用户输入日常支出后，系统自动将其分类到预定义组（如食物、交通、娱乐、购物、医疗等）
- **支出统计**: 自动计算每个类别的总支出（按账本和汇总）
- **终端显示**: 以表格形式在终端显示支出信息，清晰直观

### 3. 统计分析
- **按年查看**: 按年份查看财务统计，支持货币转换
- **按月查看**: 按月查看财务统计，支持货币转换
- **总合计**: 查看所有账本的综合统计，支持统一货币显示
- **分类明细**: 按收入和支出类别的详细统计

### 4. 交易管理
- **添加交易**: 记录收入和支出，包含日期、金额、类别和描述
- **编辑交易**: 修改现有交易记录
- **删除交易**: 删除交易记录
- **查看交易**: 按年、月、日期查看或查看全部

### 5. 货币支持
- **多货币**: 支持 USD、CNY、AUD、EUR、GBP、JPY、CAD、HKD
- **货币转换**: 使用汇率在不同货币之间转换
- **统一显示**: 以选定货币查看统计，自动转换

## 项目特点

- 💻 **终端界面**: 使用 Rich 库的美观命令行界面
- 🎨 **界面美化**: 颜色、表格、面板和格式化输出
- 📝 **文件存储**: 使用 CSV/TXT 文件存储数据，无需数据库
- 📊 **统计功能**: 全面的财务统计和报告
- 🔒 **数据安全**: 本地文件存储，保护用户隐私
- 🔐 **用户认证**: 登录、注册和访客模式支持

## 技术栈

- **编程语言**: Python 3.x
- **数据存储**: CSV/TXT 文件
  - `users.txt` - 用户登录信息
  - `expenses.csv` - 支出记录（年、月、日、金额、类别、描述）
  - `income.csv` - 收入记录（年、月、日、金额、类别、描述）
- **依赖库**: 
  - `rich` - 终端美化库（必需）

## 项目结构

```
Accounting-Book/
├── main.py                    # 主程序入口
├── init_test_data.py          # 初始化测试数据脚本
├── model/                     # 模型层（数据模型）
│   ├── __init__.py
│   ├── user.py               # 用户模型
│   └── ledger.py             # 账本模型
├── visual/                    # 视图层（用户界面）
│   ├── __init__.py
│   ├── login_view.py         # 登录界面
│   ├── register_view.py      # 注册界面
│   ├── ledger_view.py        # 账本管理界面
│   ├── transaction_view.py  # 交易录入界面
│   ├── currency_view.py      # 货币信息界面
│   └── statistics_view.py   # 统计显示界面
├── control/                   # 控制层（业务逻辑）
│   ├── __init__.py
│   ├── user_service.py       # 用户管理服务
│   ├── ledger_service.py     # 账本管理服务
│   ├── statistics_service.py # 统计服务
│   └── currency_service.py   # 货币转换服务
├── data/                      # 数据文件目录
│   ├── users/                # 用户数据存储
│   │   ├── users.txt         # 用户登录信息
│   │   └── README.md
│   └── ledgers/              # 账本数据存储
│       └── README.md
├── README.md                  # 项目文档（英文）
├── README_CN.md              # 项目文档（中文）
└── requirements.txt          # 依赖项
```

## 安装

### 前置要求
- Python 3.x
- pip (Python 包管理器)

### 设置
```bash
# 克隆仓库
git clone <repository-url>
cd Rickey-finalproject

# 安装依赖
pip install rich

# 初始化测试数据（可选）
python init_test_data.py
```

## 使用说明

### 运行程序
```bash
python main.py
```

### 操作流程
1. **启动程序**: 运行 `main.py`
2. **登录/注册/访客**: 选择登录、注册或以访客模式继续
3. **主菜单**: 
   - 创建新账本
   - 查看我的账本
   - 选择账本
   - 货币信息
   - 查看统计
   - 退出/注销
4. **账本菜单**（选择账本后）:
   - 添加支出
   - 添加收入
   - 查看支出（按年/月/日期/全部）
   - 查看收入（按年/月/日期/全部）
   - 编辑/删除交易
5. **统计功能**: 查看所有账本的综合财务统计

### 数据文件说明
- **users.txt**: 存储用户名和密码（格式: 用户名:密码）
- **expenses.csv**: 存储每个账本文件夹中的支出记录
- **income.csv**: 存储每个账本文件夹中的收入记录
- **文件夹结构**: 每个账本存储在名为 `{用户名}-{账本名}` 或访客模式的 `local-{账本名}` 的文件夹中

## 主要功能

1. **访客模式**: 无需注册即可使用，数据存储在本地
2. **用户账户**: 注册并登录以同步数据到云端（模拟）
3. **多个账本**: 为每个用户创建和管理多个账本
4. **货币支持**: 每个账本有自己的货币，创建后不可更改
5. **统计功能**: 按年、月或总合计查看统计，支持货币转换
6. **交易管理**: 交易的完整增删改查操作

## 测试

初始化测试数据进行测试：
```bash
python init_test_data.py
```

这将创建：
- 测试用户: zhangsan, lisi, wangwu
- 每个用户的测试账本（default, tourism, household）
- 示例支出和收入记录

## 开发说明

- 项目遵循 MVC（模型-视图-控制）架构
- 所有日期内部存储为 ISO 格式（YYYY-MM-DD），显示为 DD/MM/YYYY
- CSV 文件使用格式：年、月、日、金额、类别、描述
- 货币信息作为注释存储在 CSV 文件中

---

**注意**: 本项目是课程期末项目，旨在提供实用的个人财务管理解决方案。使用简单的文件存储方法，适合学习 Python 基础知识和文件处理。

